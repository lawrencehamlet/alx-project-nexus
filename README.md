# üó≥Ô∏è PollPulse ‚Äî Online Polling Web App

## What We‚Äôre Building
PollPulse is a modern, accessible web application for creating polls, collecting votes, and viewing live analytics. It focuses on a clean UX, clear validation, and reliable persistence via Firebase Firestore. Users can:
- Create a poll with 2‚Äì3 options and a defined schedule.
- Vote once and see immediate visual feedback.
- View live results with charts and management actions (update/delete).

 
---

## Concept Alignment
The implementation follows the project concept by emphasizing:
- Clear poll lifecycle: create ‚Üí share ‚Üí vote ‚Üí analyze ‚Üí manage.
- Strong validation: enforce 2‚Äì3 options, time windows, and clear inline errors.
- Feedback loops: buttons transition states (Create‚ÜíCreated, Vote‚ÜíVoted) to confirm actions.
- Accessible design: ARIA roles/labels for navigation, forms, dialogs, charts, and dynamic content.
- Scalable data: Firebase Firestore for persistent polls and votes; rules and indexes configured.

Key screens implemented:
- Dashboard (discover, quick actions, active poll card)
- Create Poll (validated form with auto end-time)
- Vote (per-poll vote page)
- Live Results (chart + management actions)

---

## Build & Architecture

### Tech Stack
- Framework: Next.js (App Router) + React + TypeScript
- Styling: Tailwind CSS + DaisyUI
- Data: Firebase SDK + Firestore
- Charts: Chart.js via `react-chartjs-2`
- Accessibility: ARIA attributes across critical components

### Project Structure (key paths)
- App pages: `onlinePollSytem/src/app/**`
- Components: `onlinePollSystem/src/components/**`
- Firebase/Firestore helpers: `onlinePollSystem/src/lib/**`
- API routes: `onlinePollSystem/src/app/api/**`

### Data Model (Firestore)
Poll document (simplified):
```ts
type PollOption = { id: string; label: string; votes?: number };
type Poll = {
  id: string;            // auto-generated by Firestore
  title: string;         // question
  description?: string;
  options: PollOption[]; // 2‚Äì3 options
  startDate: string;     // ISO date
  endDate: string;       // ISO date
  startTime: string;     // HH:mm
  endTime: string;       // HH:mm
  isActive?: boolean;
};
```

---

## Development Workflow

### Prerequisites
- Node.js 18+
- Firebase CLI (optional for deploying rules/indexes)
- Environment variables in `onlinePollSystem/.env.local`:
```
NEXT_PUBLIC_FIREBASE_API_KEY=...
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=...
NEXT_PUBLIC_FIREBASE_PROJECT_ID=...
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=...
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=...
NEXT_PUBLIC_FIREBASE_APP_ID=...
```

### Install & Run
```powershell
cd "C:\Users\Lawrence Bayode\Desktop\alx-project-nexus\webapp"
npm install
npm run dev
```
App runs at `http://localhost:3000`.

### Key API Routes
- `GET /api/polls` ‚Äì list polls
- `POST /api/polls/new` ‚Äì create poll
- `GET /api/polls/:id` ‚Äì poll by id (with guard against empty id)
- `PUT /api/polls/:id` ‚Äì update poll
- `DELETE /api/polls/:id` ‚Äì delete poll (validated, existence-checked)
- `POST /api/vote` ‚Äì submit a vote (transactional increment)
- `GET /api/active-polls` ‚Äì first active poll for dashboard/live-results

---

## Tools Used
- Next.js App Router (routing, server functions)
- React 19 (components, hooks)
- TypeScript (type safety)
- Tailwind CSS + DaisyUI (UI)
- Firebase SDK v12 (client)
- Firestore (database)
- Chart.js + `react-chartjs-2` (visualization)

---

## Challenges & How They were Solved Them

1) Form validation broken / unclear feedback
- Problem: Users could submit invalid data; errors weren‚Äôt visible.
- Solution: Added a `validate()` function enforcing required fields, 2‚Äì3 options, future start, and min 10-hour duration. Inline error messages with red borders and `role="alert"`.

2) End date/time didn‚Äôt auto-compute
- Problem: End fields only updated sometimes.
- Solution: `useEffect` re-computes end = start + 10h whenever start date/time change and clears related errors.

3) Premature success states (Create‚ÜíCreated, Vote‚ÜíVoted)
- Problem: Buttons flipped states before the action completed.
- Solution: Introduced explicit booleans (`created`, `hasVoted`) set only after successful operations.

4) Vote page 500 errors and schema mismatches
- Problem: Response fields (`title` vs `question`) caused breakage.
- Solution: Normalized API responses and callback signatures; added defensive refetch.

5) Firestore `PERMISSION_DENIED` on create
- Problem: Rules blocked write operations during dev.
- Solution: Deployed permissive dev rules; kept production rules separate for later auth.

6) GET `/api/polls/:id` empty path error
- Problem: Empty/whitespace id caused Firestore `doc()` errors.
- Solution: Trim + guard id; return `400` for missing id; try/catch with logging.

7) Delete "poll not found" despite valid id
- Problem: Route treated `params` incorrectly; id became "missing".
- Solution: In App Router, `params` is a Promise in newer Next.js ‚Äì updated GET/PUT/DELETE to `await params` and added existence checks in `removePoll()`.

---

## Accessibility (A11y)
- Added ARIA roles/labels across navigation, forms, dialogs, charts, and dynamic states.
- Radio inputs are now real form controls (`aria-checked`, `radiogroup`).
- Error and loading states use live regions (`role=status`, `aria-live`).

---

## Next Steps
- Real-time updates (web sockets or Firestore listeners)
- Firebase Authentication + production rules
- Duplicate vote prevention and ownership fields
- Share links and deep-linking enhancements
